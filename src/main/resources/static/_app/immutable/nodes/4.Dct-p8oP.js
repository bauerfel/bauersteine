import{s as F,n as L,c as S,o as J}from"../chunks/scheduler.sluXByI4.js";import{S as K,i as Q,e as k,s as y,c as E,l as j,f as C,a as T,d as b,m as V,g as B,h as m,q as W,k as M,t as A,b as I,j as O,o as X}from"../chunks/index.Vlo5ODvd.js";import{e as q}from"../chunks/each.D6YF6ztN.js";import{j as Z,m as x,a as w}from"../chunks/store.C8kMcS5N.js";import{p as $}from"../chunks/stores.Cg_iAyaT.js";function G(i,e,t){const l=i.slice();return l[3]=e[t],l}function P(i){let e,t,l=i[3].id+"",s,u,c,_=i[3].state+"",p,g,r,o=i[3].urneIds+"",a,n,d,D,f=i[3].state==="ASSIGNED"&&R(i);return{c(){e=k("tr"),t=k("td"),s=A(l),u=y(),c=k("td"),p=A(_),g=y(),r=k("td"),a=A(o),n=y(),d=k("td"),f&&f.c(),D=y()},l(v){e=E(v,"TR",{});var h=T(e);t=E(h,"TD",{});var z=T(t);s=I(z,l),z.forEach(b),u=C(h),c=E(h,"TD",{});var H=T(c);p=I(H,_),H.forEach(b),g=C(h),r=E(h,"TD",{});var N=T(r);a=I(N,o),N.forEach(b),n=C(h),d=E(h,"TD",{});var U=T(d);f&&f.l(U),U.forEach(b),D=C(h),h.forEach(b)},m(v,h){B(v,e,h),m(e,t),m(t,s),m(e,u),m(e,c),m(c,p),m(e,g),m(e,r),m(r,a),m(e,n),m(e,d),f&&f.m(d,null),m(e,D)},p(v,h){h&1&&l!==(l=v[3].id+"")&&O(s,l),h&1&&_!==(_=v[3].state+"")&&O(p,_),h&1&&o!==(o=v[3].urneIds+"")&&O(a,o),v[3].state==="ASSIGNED"?f?f.p(v,h):(f=R(v),f.c(),f.m(d,null)):f&&(f.d(1),f=null)},d(v){v&&b(e),f&&f.d()}}}function R(i){let e,t="Bezahlen",l,s;function u(){return i[4](i[3])}return{c(){e=k("button"),e.textContent=t},l(c){e=E(c,"BUTTON",{"data-svelte-h":!0}),j(e)!=="svelte-tcd3h9"&&(e.textContent=t)},m(c,_){B(c,e,_),l||(s=X(e,"click",u),l=!0)},p(c,_){i=c},d(c){c&&b(e),l=!1,s()}}}function Y(i){let e,t=i[3].userEmail===i[1]&&P(i);return{c(){t&&t.c(),e=M()},l(l){t&&t.l(l),e=M()},m(l,s){t&&t.m(l,s),B(l,e,s)},p(l,s){l[3].userEmail===l[1]?t?t.p(l,s):(t=P(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){l&&b(e),t&&t.d(l)}}}function ee(i){let e,t="Deine Bestellungen",l,s,u,c='<tr><th scope="col">Bestellungnummer</th> <th scope="col">State</th> <th scope="col">UrneIds</th> <th scope="col">Bezahlen</th></tr>',_,p,g=q(i[0]),r=[];for(let o=0;o<g.length;o+=1)r[o]=Y(G(i,g,o));return{c(){e=k("h1"),e.textContent=t,l=y(),s=k("table"),u=k("thead"),u.innerHTML=c,_=y(),p=k("tbody");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=E(o,"H1",{"data-svelte-h":!0}),j(e)!=="svelte-1y38g11"&&(e.textContent=t),l=C(o),s=E(o,"TABLE",{class:!0});var a=T(s);u=E(a,"THEAD",{"data-svelte-h":!0}),j(u)!=="svelte-7n66is"&&(u.innerHTML=c),_=C(a),p=E(a,"TBODY",{});var n=T(p);for(let d=0;d<r.length;d+=1)r[d].l(n);n.forEach(b),a.forEach(b),this.h()},h(){V(s,"class","table")},m(o,a){B(o,e,a),B(o,l,a),B(o,s,a),m(s,u),m(s,_),m(s,p);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(p,null)},p(o,[a]){if(a&7){g=q(o[0]);let n;for(n=0;n<g.length;n+=1){const d=G(o,g,n);r[n]?r[n].p(d,a):(r[n]=Y(d),r[n].c(),r[n].m(p,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=g.length}},i:L,o:L,d(o){o&&(b(e),b(l),b(s)),W(r,o)}}}function te(i,e,t){let l,s,u;S(i,Z,a=>t(5,l=a)),S(i,$,a=>t(6,s=a)),S(i,x,a=>t(1,u=a));const c=s.url.origin;let _=[],p={id:"",urneIds:[],state:""};J(()=>{g()});function g(){var a={method:"get",url:c+"/api/order",headers:{},headers:{Authorization:"Bearer "+l}};w(a).then(function(n){t(0,_=n.data)}).catch(function(n){alert("Could not get orders"),console.log(n)})}function r(a){var n={method:"post",url:c+`/api/service/${a}/pay`,headers:{Authorization:"Bearer "+l}};w(n).then(function(d){alert("Order paid"),g()}).catch(function(d){alert("Could not pay order"),console.log(d)})}return[_,u,r,p,a=>r(a.id)]}class se extends K{constructor(e){super(),Q(this,e,te,ee,F,{})}}export{se as component};
