import{s as J,n as M,c as S,o as K}from"../chunks/scheduler.sluXByI4.js";import{S as Q,i as V,e as k,s as T,c as E,l as j,f as C,a as y,d as g,m as z,g as B,h as p,q as W,k as q,t as A,b as I,j as O,o as X}from"../chunks/index.Vlo5ODvd.js";import{e as w}from"../chunks/each.D6YF6ztN.js";import{j as Z,m as x,a as G}from"../chunks/store.C8kMcS5N.js";import{p as $}from"../chunks/stores.C-G4TRTc.js";function P(i,e,t){const l=i.slice();return l[3]=e[t],l}function R(i){let e,t,l=i[3].id+"",s,u,c,_=i[3].state+"",m,b,r,o=i[3].urneIds+"",a,n,d,D,f=i[3].state==="ASSIGNED"&&Y(i);return{c(){e=k("tr"),t=k("td"),s=A(l),u=T(),c=k("td"),m=A(_),b=T(),r=k("td"),a=A(o),n=T(),d=k("td"),f&&f.c(),D=T()},l(v){e=E(v,"TR",{});var h=y(e);t=E(h,"TD",{});var H=y(t);s=I(H,l),H.forEach(g),u=C(h),c=E(h,"TD",{});var N=y(c);m=I(N,_),N.forEach(g),b=C(h),r=E(h,"TD",{});var U=y(r);a=I(U,o),U.forEach(g),n=C(h),d=E(h,"TD",{});var L=y(d);f&&f.l(L),L.forEach(g),D=C(h),h.forEach(g)},m(v,h){B(v,e,h),p(e,t),p(t,s),p(e,u),p(e,c),p(c,m),p(e,b),p(e,r),p(r,a),p(e,n),p(e,d),f&&f.m(d,null),p(e,D)},p(v,h){h&1&&l!==(l=v[3].id+"")&&O(s,l),h&1&&_!==(_=v[3].state+"")&&O(m,_),h&1&&o!==(o=v[3].urneIds+"")&&O(a,o),v[3].state==="ASSIGNED"?f?f.p(v,h):(f=Y(v),f.c(),f.m(d,null)):f&&(f.d(1),f=null)},d(v){v&&g(e),f&&f.d()}}}function Y(i){let e,t="Bezahlen",l,s;function u(){return i[4](i[3])}return{c(){e=k("button"),e.textContent=t,this.h()},l(c){e=E(c,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),j(e)!=="svelte-fh1c6g"&&(e.textContent=t),this.h()},h(){z(e,"type","button"),z(e,"class","btn btn-secondary")},m(c,_){B(c,e,_),l||(s=X(e,"click",u),l=!0)},p(c,_){i=c},d(c){c&&g(e),l=!1,s()}}}function F(i){let e,t=i[3].userEmail===i[1]&&R(i);return{c(){t&&t.c(),e=q()},l(l){t&&t.l(l),e=q()},m(l,s){t&&t.m(l,s),B(l,e,s)},p(l,s){l[3].userEmail===l[1]?t?t.p(l,s):(t=R(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){l&&g(e),t&&t.d(l)}}}function ee(i){let e,t="Deine Bestellungen",l,s,u,c='<tr><th scope="col">Bestellungnummer</th> <th scope="col">State</th> <th scope="col">UrneIds</th> <th scope="col">Bezahlen</th></tr>',_,m,b=w(i[0]),r=[];for(let o=0;o<b.length;o+=1)r[o]=F(P(i,b,o));return{c(){e=k("h1"),e.textContent=t,l=T(),s=k("table"),u=k("thead"),u.innerHTML=c,_=T(),m=k("tbody");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=E(o,"H1",{"data-svelte-h":!0}),j(e)!=="svelte-1y38g11"&&(e.textContent=t),l=C(o),s=E(o,"TABLE",{class:!0});var a=y(s);u=E(a,"THEAD",{"data-svelte-h":!0}),j(u)!=="svelte-7n66is"&&(u.innerHTML=c),_=C(a),m=E(a,"TBODY",{});var n=y(m);for(let d=0;d<r.length;d+=1)r[d].l(n);n.forEach(g),a.forEach(g),this.h()},h(){z(s,"class","table")},m(o,a){B(o,e,a),B(o,l,a),B(o,s,a),p(s,u),p(s,_),p(s,m);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(m,null)},p(o,[a]){if(a&7){b=w(o[0]);let n;for(n=0;n<b.length;n+=1){const d=P(o,b,n);r[n]?r[n].p(d,a):(r[n]=F(d),r[n].c(),r[n].m(m,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=b.length}},i:M,o:M,d(o){o&&(g(e),g(l),g(s)),W(r,o)}}}function te(i,e,t){let l,s,u;S(i,Z,a=>t(5,l=a)),S(i,$,a=>t(6,s=a)),S(i,x,a=>t(1,u=a));const c=s.url.origin;let _=[],m={id:"",urneIds:[],state:""};K(()=>{b()});function b(){var a={method:"get",url:c+"/api/order",headers:{},headers:{Authorization:"Bearer "+l}};G(a).then(function(n){t(0,_=n.data)}).catch(function(n){alert("Could not get orders"),console.log(n)})}function r(a){var n={method:"post",url:c+`/api/service/${a}/pay`,headers:{Authorization:"Bearer "+l}};G(n).then(function(d){alert("Order paid"),b()}).catch(function(d){alert("Could not pay order"),console.log(d)})}return[_,u,r,m,a=>r(a.id)]}class se extends Q{constructor(e){super(),V(this,e,te,ee,J,{})}}export{se as component};
