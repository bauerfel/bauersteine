import{s as rt,n as tt,c as et,o as st}from"../chunks/scheduler.sluXByI4.js";import{S as it,i as ct,e as m,s as k,c as g,l as F,f as C,a as T,d as f,m as ht,g as N,h as s,q as dt,t as j,b as w,o as ut,j as S}from"../chunks/index.Vlo5ODvd.js";import{e as at}from"../chunks/each.D6YF6ztN.js";import{a as L}from"../chunks/axios.B6xwUs71.js";import{p as ft}from"../chunks/stores.SBhI-m6o.js";import{j as pt}from"../chunks/store.cIuNT0ob.js";function nt(a,e,h){const i=a.slice();return i[2]=e[h],i}function lt(a){let e,h,i=a[2].beschreibung+"",c,d,b,v=a[2].material+"",p,_,o,t=a[2].preis+"",n,l,u,E=a[2].inhaltsmenge+"",U,D,B,M=a[2].state+"",q,P,O,H=a[2].id+"",z,$,I,y,G="Zu meiner Bestellung hinzuf√ºgen",J,R,Y;function ot(){return a[3](a[2])}return{c(){e=m("tr"),h=m("td"),c=j(i),d=k(),b=m("td"),p=j(v),_=k(),o=m("td"),n=j(t),l=k(),u=m("td"),U=j(E),D=k(),B=m("td"),q=j(M),P=k(),O=m("td"),z=j(H),$=k(),I=m("td"),y=m("button"),y.textContent=G,J=k()},l(A){e=g(A,"TR",{});var r=T(e);h=g(r,"TD",{});var Z=T(h);c=w(Z,i),Z.forEach(f),d=C(r),b=g(r,"TD",{});var K=T(b);p=w(K,v),K.forEach(f),_=C(r),o=g(r,"TD",{});var Q=T(o);n=w(Q,t),Q.forEach(f),l=C(r),u=g(r,"TD",{});var V=T(u);U=w(V,E),V.forEach(f),D=C(r),B=g(r,"TD",{});var W=T(B);q=w(W,M),W.forEach(f),P=C(r),O=g(r,"TD",{});var X=T(O);z=w(X,H),X.forEach(f),$=C(r),I=g(r,"TD",{});var x=T(I);y=g(x,"BUTTON",{"data-svelte-h":!0}),F(y)!=="svelte-18tcbby"&&(y.textContent=G),x.forEach(f),J=C(r),r.forEach(f)},m(A,r){N(A,e,r),s(e,h),s(h,c),s(e,d),s(e,b),s(b,p),s(e,_),s(e,o),s(o,n),s(e,l),s(e,u),s(u,U),s(e,D),s(e,B),s(B,q),s(e,P),s(e,O),s(O,z),s(e,$),s(e,I),s(I,y),s(e,J),R||(Y=ut(y,"click",ot),R=!0)},p(A,r){a=A,r&1&&i!==(i=a[2].beschreibung+"")&&S(c,i),r&1&&v!==(v=a[2].material+"")&&S(p,v),r&1&&t!==(t=a[2].preis+"")&&S(n,t),r&1&&E!==(E=a[2].inhaltsmenge+"")&&S(U,E),r&1&&M!==(M=a[2].state+"")&&S(q,M),r&1&&H!==(H=a[2].id+"")&&S(z,H)},d(A){A&&f(e),R=!1,Y()}}}function _t(a){let e,h="Alle Urnen",i,c,d,b='<tr><th scope="col">Beschreibung</th> <th scope="col">Material</th> <th scope="col">Preis</th> <th scope="col">Inhaltsmenge</th> <th scope="col">State</th> <th scope="col">UrneId</th> <th scope="col">Aktion</th></tr>',v,p,_=at(a[0]),o=[];for(let t=0;t<_.length;t+=1)o[t]=lt(nt(a,_,t));return{c(){e=m("h1"),e.textContent=h,i=k(),c=m("table"),d=m("thead"),d.innerHTML=b,v=k(),p=m("tbody");for(let t=0;t<o.length;t+=1)o[t].c();this.h()},l(t){e=g(t,"H1",{"data-svelte-h":!0}),F(e)!=="svelte-1kptfke"&&(e.textContent=h),i=C(t),c=g(t,"TABLE",{class:!0});var n=T(c);d=g(n,"THEAD",{"data-svelte-h":!0}),F(d)!=="svelte-crhq9p"&&(d.innerHTML=b),v=C(n),p=g(n,"TBODY",{});var l=T(p);for(let u=0;u<o.length;u+=1)o[u].l(l);l.forEach(f),n.forEach(f),this.h()},h(){ht(c,"class","table")},m(t,n){N(t,e,n),N(t,i,n),N(t,c,n),s(c,d),s(c,v),s(c,p);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(p,null)},p(t,[n]){if(n&3){_=at(t[0]);let l;for(l=0;l<_.length;l+=1){const u=nt(t,_,l);o[l]?o[l].p(u,n):(o[l]=lt(u),o[l].c(),o[l].m(p,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=_.length}},i:tt,o:tt,d(t){t&&(f(e),f(i),f(c)),dt(o,t)}}}function mt(a){try{const h=a.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(h).split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(i)}catch{return null}}function gt(a,e,h){let i,c;et(a,pt,t=>h(4,i=t)),et(a,ft,t=>h(5,c=t));const d=c.url.origin;let b=[],v={beschreibung:"",material:"",preis:0,inhaltsmenge:0};st(()=>{p()});function p(){var t={method:"get",url:d+"/api/urne",headers:{},headers:{Authorization:"Bearer "+i}};L(t).then(function(n){h(0,b=n.data)}).catch(function(n){alert("Could not get Urnen"),console.log(n)})}async function _(t){try{const n={headers:{Authorization:"Bearer "+i}},u=mt(i).email;let E=await L.get(`${d}/api/order/byEmailAndStatus`,{params:{email:u,status:"ASSIGNED"},...n}),U=E.data;if(U.length>0){let D=U[0];D.urneIds.push(t),E=await L.post(`${d}/api/service/${D.id}/addUrne/${t}`,{},n)}else{const D={urneIds:[t]};E=await L.post(`${d}/api/order`,D,n)}alert("Urne successfully assigned to the order")}catch(n){alert("Failed to assign Urne to the order"),console.error(n)}}return[b,_,v,t=>_(t.id)]}class Dt extends it{constructor(e){super(),ct(this,e,gt,_t,rt,{})}}export{Dt as component};
