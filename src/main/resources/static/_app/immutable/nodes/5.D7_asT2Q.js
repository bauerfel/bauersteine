import{s as re,n as W,c as te,o as ne,a as oe}from"../chunks/scheduler.sluXByI4.js";import{S as ie,i as ce,e as g,s as w,c as v,l as X,f as A,a as S,d as f,m as p,g as N,q as ue,t as C,b as E,h as o,j as G,o as he}from"../chunks/index.BQQS3HTZ.js";import{e as ae}from"../chunks/each.D6YF6ztN.js";import{j as de,a as $}from"../chunks/store.C8kMcS5N.js";import{p as pe}from"../chunks/stores.CtMSn33_.js";function se(n,t,r){const s=n.slice();return s[2]=t[r],s}function fe(n){let t,r="Zu Bestellung hinzufügen",s,i;function u(){return n[3](n[2])}return{c(){t=g("button"),t.textContent=r,this.h()},l(e){t=v(e,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),X(t)!=="svelte-1v4hvsb"&&(t.textContent=r),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-secondary")},m(e,a){N(e,t,a),s||(i=he(t,"click",u),s=!0)},p(e,a){n=e},d(e){e&&f(t),s=!1,i()}}}function _e(n){let t,r="Ausverkauft";return{c(){t=g("span"),t.textContent=r,this.h()},l(s){t=v(s,"SPAN",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-844lc3"&&(t.textContent=r),this.h()},h(){p(t,"class","badge bg-secondary")},m(s,i){N(s,t,i)},p:W,d(s){s&&f(t)}}}function le(n){let t,r,s,i,u,e,a,h=n[2].beschreibung+"",l,D,c,_,P=n[2].material+"",M,j,b,I,O=n[2].preis+"",x,H,J,U,R,V=n[2].inhaltsmenge+"",B,F,Z,K;function Y(d,m){return d[2].state==="ASSIGNED"||d[2].state==="SOLD"||d[2].state==="DELIVERED"?_e:fe}let L=Y(n),k=L(n);return{c(){t=g("div"),r=g("div"),s=g("img"),u=w(),e=g("div"),a=g("h5"),l=C(h),D=w(),c=g("p"),_=C("Material: "),M=C(P),j=w(),b=g("p"),I=C("Preis: "),x=C(O),H=C(" €"),J=w(),U=g("p"),R=C("Inhaltsmenge: "),B=C(V),F=C(" Liter"),Z=w(),k.c(),K=w(),this.h()},l(d){t=v(d,"DIV",{class:!0});var m=S(t);r=v(m,"DIV",{class:!0});var T=S(r);s=v(T,"IMG",{src:!0,class:!0,alt:!0}),u=A(T),e=v(T,"DIV",{class:!0});var y=S(e);a=v(y,"H5",{class:!0});var ee=S(a);l=E(ee,h),ee.forEach(f),D=A(y),c=v(y,"P",{class:!0});var Q=S(c);_=E(Q,"Material: "),M=E(Q,P),Q.forEach(f),j=A(y),b=v(y,"P",{class:!0});var q=S(b);I=E(q,"Preis: "),x=E(q,O),H=E(q," €"),q.forEach(f),J=A(y),U=v(y,"P",{class:!0});var z=S(U);R=E(z,"Inhaltsmenge: "),B=E(z,V),F=E(z," Liter"),z.forEach(f),Z=A(y),k.l(y),y.forEach(f),T.forEach(f),K=A(m),m.forEach(f),this.h()},h(){oe(s.src,i="/images/Urne.jpeg")||p(s,"src",i),p(s,"class","card-img-top"),p(s,"alt","Urne Image"),p(a,"class","card-title"),p(c,"class","card-text"),p(b,"class","card-text"),p(U,"class","card-text"),p(e,"class","card-body"),p(r,"class","card"),p(t,"class","col-md-4 mb-3")},m(d,m){N(d,t,m),o(t,r),o(r,s),o(r,u),o(r,e),o(e,a),o(a,l),o(e,D),o(e,c),o(c,_),o(c,M),o(e,j),o(e,b),o(b,I),o(b,x),o(b,H),o(e,J),o(e,U),o(U,R),o(U,B),o(U,F),o(e,Z),k.m(e,null),o(t,K)},p(d,m){m&1&&h!==(h=d[2].beschreibung+"")&&G(l,h),m&1&&P!==(P=d[2].material+"")&&G(M,P),m&1&&O!==(O=d[2].preis+"")&&G(x,O),m&1&&V!==(V=d[2].inhaltsmenge+"")&&G(B,V),L===(L=Y(d))&&k?k.p(d,m):(k.d(1),k=L(d),k&&(k.c(),k.m(e,null)))},d(d){d&&f(t),k.d()}}}function me(n){let t,r="Alle Urnen",s,i,u=ae(n[0]),e=[];for(let a=0;a<u.length;a+=1)e[a]=le(se(n,u,a));return{c(){t=g("h1"),t.textContent=r,s=w(),i=g("div");for(let a=0;a<e.length;a+=1)e[a].c();this.h()},l(a){t=v(a,"H1",{"data-svelte-h":!0}),X(t)!=="svelte-1kptfke"&&(t.textContent=r),s=A(a),i=v(a,"DIV",{class:!0});var h=S(i);for(let l=0;l<e.length;l+=1)e[l].l(h);h.forEach(f),this.h()},h(){p(i,"class","row")},m(a,h){N(a,t,h),N(a,s,h),N(a,i,h);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(i,null)},p(a,[h]){if(h&3){u=ae(a[0]);let l;for(l=0;l<u.length;l+=1){const D=se(a,u,l);e[l]?e[l].p(D,h):(e[l]=le(D),e[l].c(),e[l].m(i,null))}for(;l<e.length;l+=1)e[l].d(1);e.length=u.length}},i:W,o:W,d(a){a&&(f(t),f(s),f(i)),ue(e,a)}}}function ge(n){try{const r=n.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(r).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(s)}catch{return null}}function ve(n,t,r){let s,i;te(n,de,c=>r(4,s=c)),te(n,pe,c=>r(5,i=c));const u=i.url.origin;let e=[],a={beschreibung:"",material:"",preis:0,inhaltsmenge:0};ne(()=>{h()});function h(){var c={method:"get",url:u+"/api/urne",headers:{},headers:{Authorization:"Bearer "+s}};$(c).then(function(_){r(0,e=_.data)}).catch(function(_){alert("Could not get Urnen"),console.log(_)})}async function l(c){try{const _={headers:{Authorization:"Bearer "+s}},M=ge(s).email;let j=await $.get(`${u}/api/order/byEmailAndStatus`,{params:{email:M,status:"ASSIGNED"},..._}),b=j.data;if(b.length>0){let I=b[0];I.urneIds.push(c),j=await $.post(`${u}/api/service/${I.id}/addUrne/${c}`,{},_)}else{const I={urneIds:[c]};j=await $.post(`${u}/api/order`,I,_)}alert("Urne successfully assigned to the order")}catch(_){alert("Failed to assign Urne to the order"),console.error(_)}}return[e,l,a,c=>l(c.id)]}class Ie extends ie{constructor(t){super(),ce(this,t,ve,me,re,{})}}export{Ie as component};
