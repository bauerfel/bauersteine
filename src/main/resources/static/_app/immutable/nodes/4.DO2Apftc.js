import{s as W,n as N,c as V,o as X}from"../chunks/scheduler.sluXByI4.js";import{S as Z,i as $,e as y,s as U,c as k,l as M,f as x,a as C,d as E,m as I,g as L,h as u,q as Q,k as q,t as z,b as A,j as w,r as ee,o as te}from"../chunks/index.BQQS3HTZ.js";import{e as j}from"../chunks/each.D6YF6ztN.js";import{j as le,m as se,a as P}from"../chunks/store.C8kMcS5N.js";import{p as ne}from"../chunks/stores.CtMSn33_.js";function G(o,e,t){const l=o.slice();return l[3]=e[t],l}function R(o,e,t){const l=o.slice();return l[11]=e[t],l}function Y(o){let e,t,l=o[3].id+"",i,g,d,h=o[3].state+"",m,D,a,r,n,s,b=j(o[3].urneIds),p=[];for(let f=0;f<b.length;f+=1)p[f]=F(R(o,b,f));let _=o[3].state==="ASSIGNED"&&J(o);return{c(){e=y("tr"),t=y("td"),i=z(l),g=U(),d=y("td"),m=z(h),D=U(),a=y("td");for(let f=0;f<p.length;f+=1)p[f].c();r=U(),n=y("td"),_&&_.c(),s=U()},l(f){e=k(f,"TR",{});var v=C(e);t=k(v,"TD",{});var c=C(t);i=A(c,l),c.forEach(E),g=x(v),d=k(v,"TD",{});var T=C(d);m=A(T,h),T.forEach(E),D=x(v),a=k(v,"TD",{});var H=C(a);for(let B=0;B<p.length;B+=1)p[B].l(H);H.forEach(E),r=x(v),n=k(v,"TD",{});var S=C(n);_&&_.l(S),S.forEach(E),s=x(v),v.forEach(E)},m(f,v){L(f,e,v),u(e,t),u(t,i),u(e,g),u(e,d),u(d,m),u(e,D),u(e,a);for(let c=0;c<p.length;c+=1)p[c]&&p[c].m(a,null);u(e,r),u(e,n),_&&_.m(n,null),u(e,s)},p(f,v){if(v&1&&l!==(l=f[3].id+"")&&w(i,l),v&1&&h!==(h=f[3].state+"")&&w(m,h),v&1){b=j(f[3].urneIds);let c;for(c=0;c<b.length;c+=1){const T=R(f,b,c);p[c]?p[c].p(T,v):(p[c]=F(T),p[c].c(),p[c].m(a,null))}for(;c<p.length;c+=1)p[c].d(1);p.length=b.length}f[3].state==="ASSIGNED"?_?_.p(f,v):(_=J(f),_.c(),_.m(n,null)):_&&(_.d(1),_=null)},d(f){f&&E(e),Q(p,f),_&&_.d()}}}function F(o){let e,t,l,i='<img src="/images/Urne.jpeg" class="img-fluid rounded-start" alt="Urne Image"/>',g,d,h,m,D,a=o[11]+"",r,n,s,b="Beschreibung der Urne...",p,_,f='<small class="text-body-secondary">Letztes Update vor 3 Minuten</small>',v;return{c(){e=y("div"),t=y("div"),l=y("div"),l.innerHTML=i,g=U(),d=y("div"),h=y("div"),m=y("h5"),D=z("Urne ID: "),r=z(a),n=U(),s=y("p"),s.textContent=b,p=U(),_=y("p"),_.innerHTML=f,v=U(),this.h()},l(c){e=k(c,"DIV",{class:!0,style:!0});var T=C(e);t=k(T,"DIV",{class:!0});var H=C(t);l=k(H,"DIV",{class:!0,"data-svelte-h":!0}),M(l)!=="svelte-1sz9fpo"&&(l.innerHTML=i),g=x(H),d=k(H,"DIV",{class:!0});var S=C(d);h=k(S,"DIV",{class:!0});var B=C(h);m=k(B,"H5",{class:!0});var O=C(m);D=A(O,"Urne ID: "),r=A(O,a),O.forEach(E),n=x(B),s=k(B,"P",{class:!0,"data-svelte-h":!0}),M(s)!=="svelte-1d5ohix"&&(s.textContent=b),p=x(B),_=k(B,"P",{class:!0,"data-svelte-h":!0}),M(_)!=="svelte-iqupe8"&&(_.innerHTML=f),B.forEach(E),S.forEach(E),H.forEach(E),v=x(T),T.forEach(E),this.h()},h(){I(l,"class","col-md-4"),I(m,"class","card-title"),I(s,"class","card-text"),I(_,"class","card-text"),I(h,"class","card-body"),I(d,"class","col-md-8"),I(t,"class","row g-0"),I(e,"class","card mb-3"),ee(e,"max-width","540px")},m(c,T){L(c,e,T),u(e,t),u(t,l),u(t,g),u(t,d),u(d,h),u(h,m),u(m,D),u(m,r),u(h,n),u(h,s),u(h,p),u(h,_),u(e,v)},p(c,T){T&1&&a!==(a=c[11]+"")&&w(r,a)},d(c){c&&E(e)}}}function J(o){let e,t="Bezahlen",l,i;function g(){return o[4](o[3])}return{c(){e=y("button"),e.textContent=t,this.h()},l(d){e=k(d,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),M(e)!=="svelte-fh1c6g"&&(e.textContent=t),this.h()},h(){I(e,"type","button"),I(e,"class","btn btn-secondary")},m(d,h){L(d,e,h),l||(i=te(e,"click",g),l=!0)},p(d,h){o=d},d(d){d&&E(e),l=!1,i()}}}function K(o){let e,t=o[3].userEmail===o[1]&&Y(o);return{c(){t&&t.c(),e=q()},l(l){t&&t.l(l),e=q()},m(l,i){t&&t.m(l,i),L(l,e,i)},p(l,i){l[3].userEmail===l[1]?t?t.p(l,i):(t=Y(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){l&&E(e),t&&t.d(l)}}}function ae(o){let e,t="Deine Bestellungen",l,i,g,d='<tr><th scope="col">Bestellungnummer</th> <th scope="col">State</th> <th scope="col">UrneIds</th> <th scope="col">Bezahlen</th></tr>',h,m,D=j(o[0]),a=[];for(let r=0;r<D.length;r+=1)a[r]=K(G(o,D,r));return{c(){e=y("h1"),e.textContent=t,l=U(),i=y("table"),g=y("thead"),g.innerHTML=d,h=U(),m=y("tbody");for(let r=0;r<a.length;r+=1)a[r].c();this.h()},l(r){e=k(r,"H1",{"data-svelte-h":!0}),M(e)!=="svelte-1y38g11"&&(e.textContent=t),l=x(r),i=k(r,"TABLE",{class:!0});var n=C(i);g=k(n,"THEAD",{"data-svelte-h":!0}),M(g)!=="svelte-7n66is"&&(g.innerHTML=d),h=x(n),m=k(n,"TBODY",{});var s=C(m);for(let b=0;b<a.length;b+=1)a[b].l(s);s.forEach(E),n.forEach(E),this.h()},h(){I(i,"class","table")},m(r,n){L(r,e,n),L(r,l,n),L(r,i,n),u(i,g),u(i,h),u(i,m);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(m,null)},p(r,[n]){if(n&7){D=j(r[0]);let s;for(s=0;s<D.length;s+=1){const b=G(r,D,s);a[s]?a[s].p(b,n):(a[s]=K(b),a[s].c(),a[s].m(m,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=D.length}},i:N,o:N,d(r){r&&(E(e),E(l),E(i)),Q(a,r)}}}function re(o,e,t){let l,i,g;V(o,le,n=>t(5,l=n)),V(o,ne,n=>t(6,i=n)),V(o,se,n=>t(1,g=n));const d=i.url.origin;let h=[],m={id:"",urneIds:[],state:""};X(()=>{D()});function D(){var n={method:"get",url:d+"/api/order",headers:{},headers:{Authorization:"Bearer "+l}};P(n).then(function(s){t(0,h=s.data)}).catch(function(s){alert("Could not get orders"),console.log(s)})}function a(n){var s={method:"post",url:d+`/api/service/${n}/pay`,headers:{Authorization:"Bearer "+l}};P(s).then(function(b){alert("Order paid"),D()}).catch(function(b){alert("Could not pay order"),console.log(b)})}return[h,g,a,m,n=>a(n.id)]}class fe extends Z{constructor(e){super(),$(this,e,re,ae,W,{})}}export{fe as component};
