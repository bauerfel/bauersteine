import{s as $,n as q,c as w,o as ee}from"../chunks/scheduler.sluXByI4.js";import{S as te,i as le,e as k,s as U,c as y,l as N,f as B,a as T,d as b,m as I,g as S,h as p,q as X,k as P,t as L,b as M,j as G,r as ne,o as Z}from"../chunks/index.BQQS3HTZ.js";import{e as V}from"../chunks/each.D6YF6ztN.js";import{j as re,m as se,a as x}from"../chunks/store.C8kMcS5N.js";import{p as oe}from"../chunks/stores.DMWvl9sY.js";function F(r,e,l){const t=r.slice();return t[4]=e[l],t}function R(r,e,l){const t=r.slice();return t[13]=e[l],t}function Y(r){let e,l,t=r[4].id+"",c,v,n,m=r[4].state+"",C,E,d,a,_,u,i=V(r[4].urneIds),s=[];for(let f=0;f<i.length;f+=1)s[f]=K(R(r,i,f));let g=r[4].state==="ASSIGNED"&&Q(r);return{c(){e=k("tr"),l=k("td"),c=L(t),v=U(),n=k("td"),C=L(m),E=U(),d=k("td");for(let f=0;f<s.length;f+=1)s[f].c();a=U(),_=k("td"),g&&g.c(),u=U()},l(f){e=y(f,"TR",{});var o=T(e);l=y(o,"TD",{});var h=T(l);c=M(h,t),h.forEach(b),v=B(o),n=y(o,"TD",{});var D=T(n);C=M(D,m),D.forEach(b),E=B(o),d=y(o,"TD",{});var A=T(d);for(let z=0;z<s.length;z+=1)s[z].l(A);A.forEach(b),a=B(o),_=y(o,"TD",{});var O=T(_);g&&g.l(O),O.forEach(b),u=B(o),o.forEach(b)},m(f,o){S(f,e,o),p(e,l),p(l,c),p(e,v),p(e,n),p(n,C),p(e,E),p(e,d);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(d,null);p(e,a),p(e,_),g&&g.m(_,null),p(e,u)},p(f,o){if(o&1&&t!==(t=f[4].id+"")&&G(c,t),o&1&&m!==(m=f[4].state+"")&&G(C,m),o&9){i=V(f[4].urneIds);let h;for(h=0;h<i.length;h+=1){const D=R(f,i,h);s[h]?s[h].p(D,o):(s[h]=K(D),s[h].c(),s[h].m(d,null))}for(;h<s.length;h+=1)s[h].d(1);s.length=i.length}f[4].state==="ASSIGNED"?g?g.p(f,o):(g=Q(f),g.c(),g.m(_,null)):g&&(g.d(1),g=null)},d(f){f&&b(e),X(s,f),g&&g.d()}}}function J(r){let e,l="Entfernen",t,c;function v(){return r[5](r[4],r[13])}return{c(){e=k("button"),e.textContent=l,this.h()},l(n){e=y(n,"BUTTON",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-rrvzxz"&&(e.textContent=l),this.h()},h(){I(e,"class","btn btn-danger")},m(n,m){S(n,e,m),t||(c=Z(e,"click",v),t=!0)},p(n,m){r=n},d(n){n&&b(e),t=!1,c()}}}function K(r){let e,l,t,c,v,n,m,C,E=r[13]+"",d,a,_,u="Beschreibung der Urne...",i,s,g='<small class="text-body-secondary">Letztes Update vor 3 Minuten</small>',f,o=r[4].state==="ASSIGNED"&&J(r);return{c(){e=k("div"),l=k("div"),t=k("div"),o&&o.c(),c=U(),v=k("div"),n=k("div"),m=k("h5"),C=L("Urne ID: "),d=L(E),a=U(),_=k("p"),_.textContent=u,i=U(),s=k("p"),s.innerHTML=g,f=U(),this.h()},l(h){e=y(h,"DIV",{class:!0,style:!0});var D=T(e);l=y(D,"DIV",{class:!0});var A=T(l);t=y(A,"DIV",{class:!0});var O=T(t);o&&o.l(O),O.forEach(b),c=B(A),v=y(A,"DIV",{class:!0});var z=T(v);n=y(z,"DIV",{class:!0});var H=T(n);m=y(H,"H5",{class:!0});var j=T(m);C=M(j,"Urne ID: "),d=M(j,E),j.forEach(b),a=B(H),_=y(H,"P",{class:!0,"data-svelte-h":!0}),N(_)!=="svelte-1d5ohix"&&(_.textContent=u),i=B(H),s=y(H,"P",{class:!0,"data-svelte-h":!0}),N(s)!=="svelte-iqupe8"&&(s.innerHTML=g),H.forEach(b),z.forEach(b),A.forEach(b),f=B(D),D.forEach(b),this.h()},h(){I(t,"class","col-md-4"),I(m,"class","card-title"),I(_,"class","card-text"),I(s,"class","card-text"),I(n,"class","card-body"),I(v,"class","col-md-8"),I(l,"class","row g-0"),I(e,"class","card mb-3"),ne(e,"max-width","540px")},m(h,D){S(h,e,D),p(e,l),p(l,t),o&&o.m(t,null),p(l,c),p(l,v),p(v,n),p(n,m),p(m,C),p(m,d),p(n,a),p(n,_),p(n,i),p(n,s),p(e,f)},p(h,D){h[4].state==="ASSIGNED"?o?o.p(h,D):(o=J(h),o.c(),o.m(t,null)):o&&(o.d(1),o=null),D&1&&E!==(E=h[13]+"")&&G(d,E)},d(h){h&&b(e),o&&o.d()}}}function Q(r){let e,l="Bezahlen",t,c;function v(){return r[6](r[4])}return{c(){e=k("button"),e.textContent=l,this.h()},l(n){e=y(n,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),N(e)!=="svelte-fh1c6g"&&(e.textContent=l),this.h()},h(){I(e,"type","button"),I(e,"class","btn btn-secondary")},m(n,m){S(n,e,m),t||(c=Z(e,"click",v),t=!0)},p(n,m){r=n},d(n){n&&b(e),t=!1,c()}}}function W(r){let e,l=r[4].userEmail===r[1]&&Y(r);return{c(){l&&l.c(),e=P()},l(t){l&&l.l(t),e=P()},m(t,c){l&&l.m(t,c),S(t,e,c)},p(t,c){t[4].userEmail===t[1]?l?l.p(t,c):(l=Y(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){t&&b(e),l&&l.d(t)}}}function ae(r){let e,l="Deine Bestellungen",t,c,v,n='<tr><th scope="col">Bestellungnummer</th> <th scope="col">State</th> <th scope="col">UrneIds</th> <th scope="col">Bezahlen</th></tr>',m,C,E=V(r[0]),d=[];for(let a=0;a<E.length;a+=1)d[a]=W(F(r,E,a));return{c(){e=k("h1"),e.textContent=l,t=U(),c=k("table"),v=k("thead"),v.innerHTML=n,m=U(),C=k("tbody");for(let a=0;a<d.length;a+=1)d[a].c();this.h()},l(a){e=y(a,"H1",{"data-svelte-h":!0}),N(e)!=="svelte-1y38g11"&&(e.textContent=l),t=B(a),c=y(a,"TABLE",{class:!0});var _=T(c);v=y(_,"THEAD",{"data-svelte-h":!0}),N(v)!=="svelte-7n66is"&&(v.innerHTML=n),m=B(_),C=y(_,"TBODY",{});var u=T(C);for(let i=0;i<d.length;i+=1)d[i].l(u);u.forEach(b),_.forEach(b),this.h()},h(){I(c,"class","table")},m(a,_){S(a,e,_),S(a,t,_),S(a,c,_),p(c,v),p(c,m),p(c,C);for(let u=0;u<d.length;u+=1)d[u]&&d[u].m(C,null)},p(a,[_]){if(_&15){E=V(a[0]);let u;for(u=0;u<E.length;u+=1){const i=F(a,E,u);d[u]?d[u].p(i,_):(d[u]=W(i),d[u].c(),d[u].m(C,null))}for(;u<d.length;u+=1)d[u].d(1);d.length=E.length}},i:q,o:q,d(a){a&&(b(e),b(t),b(c)),X(d,a)}}}function ie(r,e,l){let t,c,v;w(r,re,i=>l(7,t=i)),w(r,oe,i=>l(8,c=i)),w(r,se,i=>l(1,v=i));const n=c.url.origin;let m=[],C={id:"",urneIds:[],state:""};ee(()=>{E()});function E(){var i={method:"get",url:n+"/api/order",headers:{},headers:{Authorization:"Bearer "+t}};x(i).then(function(s){l(0,m=s.data)}).catch(function(s){alert("Could not get orders"),console.log(s)})}function d(i){var s={method:"post",url:n+`/api/service/${i}/pay`,headers:{Authorization:"Bearer "+t}};x(s).then(function(g){alert("Order paid"),E()}).catch(function(g){alert("Could not pay order"),console.log(g)})}function a(i,s){var g={method:"delete",url:n+`/api/service/${i}/removeUrne/${s}`,headers:{Authorization:"Bearer "+t}};x(g).then(function(f){alert("Urne removed from order"),E()}).catch(function(f){alert("Could not remove Urne from order"),console.log(f)})}return[m,v,d,a,C,(i,s)=>a(i.id,s),i=>d(i.id)]}class _e extends te{constructor(e){super(),le(this,e,ie,ae,$,{})}}export{_e as component};
